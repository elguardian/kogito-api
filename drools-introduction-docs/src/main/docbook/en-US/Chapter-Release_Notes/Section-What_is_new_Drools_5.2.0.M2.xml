<?xml version="1.0" encoding="UTF-8"?>
<section version="5.0"
         xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd http://www.w3.org/1999/xlink http://www.docbook.org/xml/5.0/xsd/xlink.xsd"
         xml:base="../" xmlns="http://docbook.org/ns/docbook"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns="http://docbook.org/ns/docbook">
  <title>What is New and Noteworthy in Drools 5.2.0.M2</title>

  <section>
    <title>Maven artifactId changes</title>

    <para>A couple of maven artifacts (jars, wars, ...) have been renamed so
    it is more clear what they do. Below is the list of the GAV changes,
    adjust your <literal>pom.xml</literal> files accordingly when upgrading to
    the new version.</para>

    <table>
      <title>Maven GAV changes overview</title>

      <tgroup cols="4">
        <thead>
          <row>
            <entry align="center">Old groupId</entry>

            <entry align="center">Old artifactId</entry>

            <entry align="center">New groupId</entry>

            <entry align="center">New artifactId</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>org.drools</entry>

            <entry>drools (the parent pom)</entry>

            <entry>org.drools</entry>

            <entry>droolsjbpm-parent</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-api</emphasis></entry>

            <entry>org.drools</entry>

            <entry><emphasis role="bold">knowledge-api</emphasis></entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-introduction</entry>

            <entry>org.drools</entry>

            <entry>drools-introduction-docs</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-examples-drl</entry>

            <entry>org.drools</entry>

            <entry>drools-examples</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-examples-fusion / drools-examples-drl (jBPM using
            parts)</entry>

            <entry>org.drools</entry>

            <entry>droolsjbpm-integration-examples</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-expert</entry>

            <entry>org.drools</entry>

            <entry>droolsjbpm-expert-docs</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-fusion</entry>

            <entry>org.drools</entry>

            <entry>droolsjbpm-fusion-docs</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-repository</emphasis></entry>

            <entry>org.drools</entry>

            <entry><emphasis role="bold">guvnor-repository</emphasis></entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-ide-common</emphasis></entry>

            <entry>org.drools</entry>

            <entry><emphasis
            role="bold">droolsjbpm-ide-common</emphasis></entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-guvnor</emphasis></entry>

            <entry>org.drools</entry>

            <entry><emphasis role="bold">guvnor-webapp</emphasis></entry>
          </row>

          <row>
            <entry>org.jboss.drools.guvnor.tools</entry>

            <entry>guvnor-importer</entry>

            <entry>org.drools</entry>

            <entry>guvnor-bulk-importer</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-guvnor</entry>

            <entry>org.drools</entry>

            <entry>guvnor-docs</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-server</emphasis></entry>

            <entry>org.drools</entry>

            <entry><emphasis
            role="bold">drools-camel-server</emphasis></entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-integration</entry>

            <entry>org.drools</entry>

            <entry>droolsjbpm-integration-docs</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis role="bold">drools-flow-core</emphasis></entry>

            <entry>TODO</entry>

            <entry>TODO</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis
            role="bold">drools-flow-compiler</emphasis></entry>

            <entry>TODO</entry>

            <entry>TODO</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry><emphasis
            role="bold">drools-flow-persistence-jpa</emphasis></entry>

            <entry>TODO</entry>

            <entry>TODO</entry>
          </row>

          <row>
            <entry>org.drools</entry>

            <entry>drools-docs-flow</entry>

            <entry>TODO</entry>

            <entry>TODO</entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <para>For example: before, in your <literal>pom.xml</literal> files, you
    declared <literal>drools-api</literal> like this:</para>

    <programlisting>  &lt;dependency&gt;
    &lt;groupId&gt;org.drools&lt;/groupId&gt;
    &lt;artifactId&gt;drools-api&lt;/artifactId&gt;
    ...
  &lt;/dependency&gt;</programlisting>

    <para>And now, afterwards, in your <literal>pom.xml</literal> files, you
    declare <literal>knowledge-api</literal> like this instead:</para>

    <programlisting>  &lt;dependency&gt;
    &lt;groupId&gt;org.drools&lt;/groupId&gt;
    &lt;artifactId&gt;knowledge-api&lt;/artifactId&gt;
    ...
  &lt;/dependency&gt;</programlisting>
  </section>

  <section>
    <title>Knowledge API (renamed from Drools API)</title>

    <para>TODO</para>
  </section>

  <section>
    <title>Drools Expert and Fusion</title>

    <para>TODO</para>
  </section>

  <section>
    <title>jBPM 5 (merged from Drools Fusion and jBPM 3-4)</title>

    <para>TODO</para>
  </section>

  <section>
    <title>Drools and jBPM integration</title>

    <para>TODO</para>
  </section>

  <section>
    <title>Guvnor</title>

    <para>TODO</para>

    <section>
      <title>Decision Tables</title>

      <para>Further extension has been made to the decision table's
      featureset.</para>

      <section>
        <title>Negation of Fact patterns</title>

        <para>Fact Patterns in condition columns can be negated to match when
        the defined pattern does not exist in WorkingMemory. In essence it is
        now possible to construct rules within the decision table equivalent
        to the following DRL fragment:-</para>

        <programlisting>not Cheese( name == "Cheddar" ) </programlisting>

        <figure>
          <title>Negation of Fact Patterns</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="images/Chapter-Release_Notes/negate-fact-pattern.png"
                         format="PNG" scalefit="1"></imagedata>
            </imageobject>
          </mediaobject>
        </figure>
      </section>

      <section>
        <title>Negation of rules</title>

        <para>Entire rules can be negated, giving rise to DRL fragements such
        as:-</para>

        <programlisting>rule "no cheddar liked by Fred"
  when
    not (
      $c : Cheese( name == "Cheddar" )
      Person( name == "Fred", favouriteCheese == $c )
    )
  then
    ..
end
 </programlisting>

        <figure>
          <title>Negation of rules</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="images/Chapter-Release_Notes/negate-rule-option.png"
                         format="PNG" scalefit="1"></imagedata>
            </imageobject>
          </mediaobject>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="images/Chapter-Release_Notes/negate-rule.png"
                         format="PNG" scalefit="1"></imagedata>
            </imageobject>
          </mediaobject>
        </figure>
      </section>

      <section>
        <title>Support for "otherwise"</title>

        <para>Condition columns containing literal values that use the
        equality (==, equal to) or inequality (!=, not equal to) operators can
        now contain a meta-value for "otherwise" which represents all other
        values not explicitly defined in the column. This feature gives rise
        to DRL fragments such as the following:-</para>

        <programlisting>#from row number: 1
rule "Row 1 dtable"
  salience 1
  dialect "mvel"
when
  $p : Person( name == "Bill" , age != "30" )
then
  $p.setAge( 12345 );
end

#from row number: 2
rule "Row 2 dtable"
  salience 2
  dialect "mvel"
when
  $p : Person( name == "Ben" , age in ( "30", "40", "50" ) )
then
  $p.setAge( 12345 );
end

#from row number: 3
rule "Row 3 dtable"
  salience 3
  dialect "mvel"
when
  $p : Person( name == "Weed" , age != "40" )
then
  $p.setAge( 12345 );
end

#from row number: 4
rule "Row 4 dtable"
  salience 4
  dialect "mvel"
when
  $p : Person( name not in ( "Bill", "Ben", "Weed" ) , age != "50" )
then
  $p.setAge( 12345 );
end</programlisting>

        <figure>
          <title>Support for "otherwise"</title>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="images/Chapter-Release_Notes/otherwise.png"
                         format="PNG" scalefit="1"></imagedata>
            </imageobject>
          </mediaobject>
        </figure>
      </section>
    </section>
  </section>
</section>
